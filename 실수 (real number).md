# 실수 (real number)



> 2진 실수를 10진수로?

진수 변환과 동일한 방법으로 가능

즉 해당 열에 대해 해당 진수를 곱한 값을 더한다.

- 0.0011~(2)~ ?
  1. 0.0001~(2)~ =  1x2^-4^ ~(10)~ = 0.0625~(10)~
  2. 0.0010~(2)~ =  1x2^-3^ ~(10)~ = 0.125~(10)~
  3. 0.0625 + 0.125 = 0.1875
  4. 0.0011~(2)~ = 0.1875~(10)~



> 컴퓨터에서 실수 표현?

- Floating-point 표기법 (부동 소수점) 사용

  소수점 위치를 왼쪽의 가장 `유효`한 숫자 다음으로 고정시키고, 밑수의 지수승으로 표현

  12345.0005 = 1.23450005 x 2^4^



#### 컴퓨터에서 실수를 저장하는 방식 

부호/가수부/지수부로 구분하여 저장

- Mantissa (가수부) : 실수의 유효 자릿수들을 부호화된 고정 소수점으로 표현한 것 (부동소수점의 1.23450005 부분)

- Exponent (지수부) : 실제 소수점의 위치를 지수 승으로 표현한 것

  (부동소수점의 2^4^ 부분)

- 단정도 실수 (32비트) : 부호 1비트 + 지수 8비트 + 가수 23비트
- 배정도 실수 (64비트) : 부호 1비트 + 지수 11비트 + 가수 52비트



> 언어에 따른 차이

java, C  -> 단정도 실수를 4바이트 크기의 float 타입 / 배정도 실수는 8바이트 크기의 double 타입으로 제공

python -> 단정도 실수 사용 X / 8 바이트 크기의 float 타입 ==배정도 실수로만 처리==!



#### 단정도 실수

> 단정도 실수의 가수 부분 만들기

- 1001.0011

1. 정수부의 첫 번째 자리가 1이 되도록 소수점을 오른쪽으로 이동

   0001.0010011

2. 소수점 이하를 23비트로 만들기 (모자란 부분은 0으로 채우기)

   0001.00100110000000000000000

3. 소수점 이하만 가수 부분에 저장

   00100110000000000000000 만 저장

4. 지수 부분은 시프트 한 자릿수 만큼 증가 혹은 감소 (소수점 자리수 정보 저장)

   1.0010011 x 2^3^ ,  2^3^

> 단정도 실수의 지수 부분 만들기

지수부에는 ==8비트가 배정==됨 (2^8^ = 256 상태 표현 가능)

0~255까지 나타낼 수 있지만, 음수표현도 필요하기 때문에 ==Excess 표현법== 사용함

- Excess 표현법 : 지수부의 값을 반으로 나눈 값을 0으로 간주하여 음수 지수, 양수 지수를 표현함
- 255//2 = 127~(20)~ = 01111111~(2)~이 지수의 0을 나타냄

| 실제 지수 |   2진수   |  10진수   |
| :-------: | :-------: | :-------: |
|    128    | 11111111  |    255    |
|    127    | 11111110  |    254    |
| ......... | ......... | ......... |
|     1     | 10000000  |    128    |
|     0     | 01111111  |    127    |
|    -1     | 01111110  |    126    |
| ......... | ......... | ......... |
|   -126    | 00000001  |     1     |
|   -127    | 00000000  |     0     |

- 즉 1.0010011 x 2^3^ 에서 지수부는 130~(10)~ 을 2진수로 나타낸 10000010~(2)~ 가 저장됨



- 1.0010011 x 2^3^ 는 단정도 표현에서 다음과 같이 저장되어 있음

  부호는 0

  지수는 10000010

  가수는 00100110000000000000000



#### 실수는 이진법으로 표현될 때 오차가 발생할 수 있다

컴퓨터는 실수를 근사적으로 표현한다 --> 이진법으로 표현할 수 없는 형태의 실수는 정확한 값이 아니라 근사값으로 저장되므로, 근사값으로 저장될 때 생기는 오차에 의해 계산결과가 틀려지는 것을 주의해야함

> 실수 자료형의 유효 자릿수

- 32 비트 단정도 표현의 유효자릿수(십진수) 6, 7자리 이상의 실수값을 저장하는 경우 오차 발생 가능
- 64 비트 배정도 표현의 유효자릿수 15, 16자리 이상의 실수값 저장하는 경우 오차 발생 가능



TIP) python 에서는 따라서 계산시 math module을 통해 .isclose() method를 이용한다.

